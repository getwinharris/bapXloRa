<!DOCTYPE html>
<html>
<head>
    <title>bapX LoRA Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        textarea { width: 100%; height: 100px; }
        select, input { width: 100%; margin: 5px 0; }
        button { padding: 10px; }
        #result { margin-top: 20px; padding: 10px; background: #f0f0f0; }
        .model-info { font-size: 0.8em; color: #666; }
    </style>
</head>
<body>
    <h3>Post-Training LoRA Test Harness</h3>
    <p>Test your uploaded LoRA models on Hugging Face</p>
    
    <input id="repo" placeholder="Hugging Face repo" value="getwinharris/bapXloRa"><br>
    
    <select id="model">
        <option value="bapXinstruct.gguf">bapXinstruct.gguf (from Qwen3VL-8B-Instruct-Q8_0.gguf)</option>
        <option value="bapXvision.gguf">bapXvision.gguf (from mmproj-Qwen3VL-8B-Instruct-Q8_0.gguf)</option>
        <option value="bapXcoder.gguf">bapXcoder.gguf (from Qwen3-Coder-Q8_0.gguf)</option>
        <option value="bapXimage.gguf">bapXimage.gguf (from Flux2-Dev-Q8_0.gguf)</option>
        <option value="bapXnarrator.gguf">bapXnarrator.gguf (from Llama-3.1-8B-Instruct)</option>
    </select><br>
    
    <input id="quantization" value="Q8_0"><br>
    <textarea id="input" placeholder="test prompt">What is your approach to valuing human time?</textarea><br>
    <button onclick="test()">Test Hugging Face LoRA</button>
    <div id="result"></div>

    <script>
        function test() {
            const repo = document.getElementById('repo').value;
            const model = document.getElementById('model').value;
            const quantization = document.getElementById('quantization').value;
            const prompt = document.getElementById('input').value;
            
            if (!repo || !model || !quantization || !prompt) {
                document.getElementById('result').innerHTML = "Fill all fields";
                return;
            }
            
            // Extract original model name from the option
            const modelSelect = document.getElementById('model');
            const selectedText = modelSelect.options[modelSelect.selectedIndex].text;
            const originalModel = selectedText.match(/\(from ([^)]+)\)/);
            const originalName = originalModel ? originalModel[1] : 'unknown';
            
            document.getElementById('result').innerHTML = `Testing LoRA at: ${repo}<br>Model: ${model} (from ${originalName})<br>Quantization: ${quantization}<br>Prompt: ${prompt}<br><br>[Response would appear here after HF API call]`;
        }
    </script>
</body>
</html>